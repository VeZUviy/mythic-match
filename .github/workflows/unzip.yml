name: 1. Unzip Files

on:
  push:
    paths:
      - '**.zip' # –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è, –∫–æ–ª–∏ –±–∞—á–∏—Ç—å zip
  workflow_dispatch: # –î–æ–¥–∞—î –∫–Ω–æ–ø–∫—É –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É

permissions:
  contents: write

jobs:
  unzip_all:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Unzip Archives
        run: |
          # –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ Git
          git config --global user.name "Auto Bot"
          git config --global user.email "bot@github.com"
          
          # –®—É–∫–∞—î–º–æ –≤—Å—ñ zip —ñ —Ä–æ–∑–ø–∞–∫–æ–≤—É—î–º–æ
          for file in *.zip; do
            if [ -f "$file" ]; then
              echo "–†–æ–∑–ø–∞–∫–æ–≤—É—é $file..."
              unzip -o "$file" -d .
              rm "$file"
            fi
          done
          
          # –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –∑–º—ñ–Ω–∏ (–≤–∏–¥–∞–ª—è—î–º–æ –∞—Ä—Ö—ñ–≤–∏, –ª–∏—à–∞—î–º–æ –ø–∞–ø–∫–∏)
          git add .
          if ! git diff-index --quiet HEAD; then
            git commit -m "üìÇ –§–∞–π–ª–∏ —Ä–æ–∑–ø–∞–∫–æ–≤–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ"
            git push
          else
            echo "–ù—ñ—á–æ–≥–æ –Ω–æ–≤–æ–≥–æ –Ω–µ —Ä–æ–∑–ø–∞–∫–æ–≤–∞–Ω–æ."
          fi
