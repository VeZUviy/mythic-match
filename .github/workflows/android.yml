name: 2. Build Android APK (Debug Fix)
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - uses: actions/setup-node@v4
      with:
        node-version: '18'
        
    - uses: actions/setup-java@v4
      with:
        distribution: 'temurin'
        java-version: '17'
        
    - name: Install Cordova
      run: npm install -g cordova

    - name: Build Project
      run: |
        cordova create mygame com.wonderrun.mythic "Mythic Match"
        rm -rf mygame/www/*
        
        # Копіюємо файли
        rsync -av --exclude='mygame' --exclude='.git' --exclude='.github' . mygame/www/
        if [ -f "icon.png" ]; then cp icon.png mygame/www/icon.png; fi
        
        cd mygame
        cordova platform add android
        
        # ЗМІНА: Робимо --debug (це надійніше для тесту)
        cordova build android --debug

    - name: Find and Upload APK
      uses: actions/upload-artifact@v4
      with:
        name: Mythic-Match-APK
        path: |
          **/*.apk
          **/*.aab

